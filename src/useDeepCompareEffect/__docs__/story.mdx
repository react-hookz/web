import { Canvas, Meta, Story } from '@storybook/addon-docs';
import { Example } from './example.stories';
import { ImportPath } from '../../__docs__/ImportPath';

<Meta title="Lifecycle/useDeepCompareEffect" component={Example} />

# useDeepCompareEffect

Like `useEffect` but uses `@react-hookz/deep-equal` comparator function to validate deep dependency
changes.

- SSR-friendly, meaning that comparator won't be called on the server.
- Ability to change underlying effect hook (default to `useEffect`).
- Uses yet fastest deep-comparator - [@react-hookz/deep-equal](https://github.com/react-hookz/deep-equal).

#### Example

<Canvas>
  <Story story={Example} inline />
</Canvas>

## Reference

```ts
export function useCustomCompareEffect<
  Callback extends EffectCallback = EffectCallback,
  Deps extends DependencyList = DependencyList,
  HookRestArgs extends any[] = any[],
  R extends HookRestArgs = HookRestArgs
>(
  callback: Callback,
  deps: Deps,
  effectHook: EffectHook<Callback, Deps, HookRestArgs> = useEffect,
  ...effectHookRestArgs: R
): void;
```

#### Importing

<ImportPath />

#### Arguments

- **callback** _`EffectCallback`_ - Function that will be passed to underlying effect hook.
- **deps** _`React.DependencyList`_ - Dependencies list like for `useEffect`. If not undefined -
  effect will be triggered when deps change AND conditions satisfy predicate.
- **effectHook** _`EffectHook<Callback, Deps, HookRestArgs>`_ - Effect hook that will be used to
  run callback. Must comply `useEffect` signature, meaning that callback should be placed as first
  argument and dependencies list as second.
- **...effectHookRestArgs** _`HookRestArgs`_ - Extra arguments that passed to effectHook. Meaning
  the arguments that are after 2nd argument.
