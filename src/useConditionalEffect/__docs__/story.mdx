import { Canvas, Meta, Story } from '@storybook/addon-docs/blocks';
import { Example } from './example.stories';

<Meta title="Lifecycle/useConditionalEffect" component={Example} />

# useConditionalEffect

Like `useEffect` but callback invoked only if conditions match predicate. By default, predicate
matches if all conditions are truthy.

Like `useEffect`, it performs conditions match on first mount.

#### Example

<Canvas>
  <Story story={Example} inline />
</Canvas>

## Reference

```ts
type IUseConditionalEffectPredicate<Cond extends ReadonlyArray<any>> = (
  conditions: Cond
) => boolean;

function useConditionalEffect<T extends ReadonlyArray<any>>(
  callback: React.EffectCallback,
  conditions: T,
  deps?: React.DependencyList,
  predicate?: IUseConditionalEffectPredicate<T>
): void;
```

#### Arguments

- **callback** _`React.EffectCallback`_ - Effect callback like for `React.useEffect` hook
- **conditions** _`ReadonlyArray<any>`_ - Conditions that are matched against predicate
- **deps** _`React.DependencyList`_ - Dependencies list like for `useEffect`. If set - effect will
  be triggered when deps changed AND conditions are satisfying predicate.
- **predicate** _`IUseConditionalEffectPredicate<ReadonlyArray<any>>`_ - Predicate that matches
  conditions.
  By default, it is all-truthy provision, meaning that all conditions should be truthy.
