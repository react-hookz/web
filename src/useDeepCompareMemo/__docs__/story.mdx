import { Canvas, Meta, Story } from '@storybook/addon-docs/blocks'
import { Example } from './example.stories'
import { ImportPath } from '../../__docs__/ImportPath'

<Meta title="Miscellaneous/useDeepCompareMemo" component={Example} />

# useDeepCompareMemo

Like `useMemo` but uses `@react-hookz/deep-equal` comparator function to validate deep dependency changes.

- SSR-friendly, meaning that the comparator won't be called on the server.
- Uses yet fastest deep-comparator - [@react-hookz/deep-equal](https://github.com/react-hookz/deep-equal).

#### Example

<Canvas>
  <Story story={Example} />
</Canvas>

## Reference

```ts
export function useDeepCompareMemo<T, Deps extends DependencyList>(
  factory: () => T,
  deps: Deps
): T
```

#### Importing

<ImportPath />

#### Arguments

- **factory** `() => T` - Function calculating the memoized value. Passed to the underlying `useMemo`.
- **deps** `DependencyList` - List of all reactive values referenced by `factory`. Passed to the `deps` parameter of the underlying `useMemo`.

#### Return

Initially returns the result of calling `factory`. This value is memoized and returned on every
render, until the dependencies change, determined by deep comparison, at which point `factory` will be called again and the resulting
value will be memoized.
