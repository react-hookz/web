import { Canvas, Meta, Story } from '@storybook/addon-docs/blocks';
import { Example } from './example.stories';

<Meta title="Lifecycle/useConditionalUpdateEffect" component={Example} />

# useConditionalUpdateEffect

Like `useUpdateEffect` but callback invoked only if conditions match predicate. By default, predicate
matches if all conditions are truthy.

Like `useUpdateEffect`, it _does not_ perform conditions match on first mount.

#### Example

<Canvas>
  <Story story={Example} inline />
</Canvas>

## Reference

```ts
type IUseConditionalUpdateEffectPredicate<Cond extends ReadonlyArray<any>> = (
  conditions: Cond
) => boolean;

function useConditionalUpdateEffect<T extends ReadonlyArray<any>>(
  callback: React.EffectCallback,
  conditions: T,
  deps?: React.DependencyList,
  predicate?: IUseConditionalUpdateEffectPredicate<T>
): void;
```

#### Arguments

- _**callback**_ _`React.EffectCallback`_ - Effect callback like for `React.useEffect` hook
- _**conditions**_ _`ReadonlyArray<any>`_ - Conditions that are matched against predicate
- **deps** _`React.DependencyList`_ - Dependencies list like for `useEffect`. If set - effect will
  be triggered when deps changed AND conditions are satisfying predicate.
- _**predicate**_ _`IUseConditionalUpdateEffectPredicate<ReadonlyArray<any>>`_ - Predicate that
  matches conditions.
  By default, it is all-truthy provision, meaning that all conditions should be truthy.
